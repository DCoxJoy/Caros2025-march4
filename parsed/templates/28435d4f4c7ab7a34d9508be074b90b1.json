{"components/products/add-to-cart-2":"<div id=\"add-to-cart-wrapper-2\" {{#unless product.can_purchase}}style=\"display: none\"{{/unless}}>\r\n    {{#if theme_settings.show_product_quantity_box}}\r\n        <div class=\"form-field form-field--increments\">\r\n            <label class=\"form-label form-label--alternate\"\r\n                   for=\"qty[]\">{{lang 'products.quantity'}}</label>\r\n                <div class=\"form-increment\" data-quantity-change>\r\n                    <button class=\"button button--icon\" data-action=\"dec\">\r\n                        <span class=\"is-srOnly\">{{lang 'products.quantity_decrease'}}</span>\r\n                        <i class=\"icon\" aria-hidden=\"true\">\r\n                            <svg>\r\n                                <use xlink:href=\"#icon-keyboard-arrow-down\"/>\r\n                            </svg>\r\n                        </i>\r\n                    </button>\r\n                    <input class=\"form-input form-input--incrementTotal one\"\r\n                           id=\"qty[]\"\r\n                           name=\"qty[]\"\r\n                           type=\"tel\"\r\n                           value=\"{{#if product.min_purchase_quantity}}{{product.min_purchase_quantity}}{{else}}1{{/if}}\"\r\n                           data-quantity-min=\"{{product.min_purchase_quantity}}\"\r\n                           data-quantity-max=\"{{product.max_purchase_quantity}}\"\r\n                           min=\"1\"\r\n                           pattern=\"[0-9]*\"\r\n                           aria-live=\"polite\">\r\n                    <button class=\"button button--icon\" data-action=\"inc\">\r\n                        <span class=\"is-srOnly\">{{lang 'products.quantity_increase'}}</span>\r\n                        <i class=\"icon\" aria-hidden=\"true\">\r\n                            <svg>\r\n                                <use xlink:href=\"#icon-keyboard-arrow-up\"/>\r\n                            </svg>\r\n                        </i>\r\n                    </button>\r\n                </div>\r\n        </div>\r\n    {{/if}}\r\n\r\n    <div class=\"alertBox productAttributes-message\" style=\"display:none\">\r\n        <div class=\"alertBox-column alertBox-icon\">\r\n            <icon glyph=\"ic-success\" class=\"icon\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z\"></path></svg></icon>\r\n        </div>\r\n        <p class=\"alertBox-column alertBox-message\"></p>\r\n    </div>\r\n    {{#or customer (if theme_settings.restrict_to_login '!==' true)}}\r\n        <div class=\"form-action\">\r\n            <input id=\"form-action-addToCart\" data-wait-message=\"{{lang 'products.adding_to_cart'}}\" class=\"button button--primary\" type=\"submit\"\r\n                value=\"{{#if product.pre_order}}{{lang 'products.pre_order'}}{{else}}{{lang 'products.add_to_cart'}}{{/if}}\" {{#if product.can_purchase}}{{else}}disabled {{/if}}>\r\n        </div>\r\n         {{{snippet 'product_addtocart'}}}\r\n    {{/or}}\r\n</div>\r\n{{#or customer (unless settings.hide_price_from_guests)}}\r\n    {{#if theme_settings.halo_buy_it_now}}\r\n        <div class=\"productView-actions productView-actions--buyItNow\">\r\n            <div class=\"form-action form-action--buyItNow\">\r\n                <input id=\"form-action-buyItNow\" data-wait-message=\"{{lang 'products.adding_to_cart'}}\" class=\"button button--primary button--buyItNow\" type=\"submit\"\r\n                value=\"{{lang 'products.buy_it_now'}}\">\r\n            </div>\r\n        </div>\r\n    {{/if}}\r\n{{/or}}\r\n{{#or customer (unless settings.hide_price_from_guests)}}\r\n    {{#if wallet_buttons}}\r\n        <div class=\"add-to-cart-wallet-buttons your-class-for-wallet-buttons-list\" data-add-to-cart-wallet-buttons>\r\n            {{{wallet_buttons}}}\r\n        </div>\r\n        <script type=\"text/javascript\">\r\n            function updateProductDetailsData(form) {\r\n                const productDetails = {};\r\n                const formData = new FormData(form);\r\n        \r\n                for (const [fieldName, fieldValue] of formData) {\r\n                    if (fieldName === 'product_id') {\r\n                        productDetails.productId = Number(fieldValue);\r\n                    }\r\n        \r\n                    if (fieldName === 'qty[]') {\r\n                        productDetails.quantity = Number(fieldValue);\r\n                    }\r\n        \r\n                    if (fieldName.match(/attribute/)) {\r\n                    const productOption = {\r\n                        optionId: Number(fieldName.match(/\\d+/g)[0]),\r\n                        optionValue: fieldValue,\r\n                    };\r\n        \r\n                    productDetails.optionSelections = productDetails?.optionSelections\r\n                        ? [...productDetails.optionSelections, productOption]\r\n                        : [productOption];\r\n                    }\r\n                }\r\n        \r\n                document.dispatchEvent(new CustomEvent('onProductUpdate', {\r\n                    bubbles: true,\r\n                    detail: { productDetails },\r\n                }));\r\n            }\r\n        \r\n            function resetProductDetailsData() {\r\n                const productDetails = {};\r\n        \r\n                document.dispatchEvent(new CustomEvent('onProductUpdate', {\r\n                    bubbles: true,\r\n                    detail: { productDetails },\r\n                }));\r\n            }\r\n        \r\n            function init() {\r\n                const form = document.querySelector('form[data-cart-item-add]');\r\n                const submitButton = form.querySelector('input[type=\"submit\"]');\r\n                const walletButtonsContainer = document.querySelector('[data-add-to-cart-wallet-buttons]');\r\n        \r\n                if (!walletButtonsContainer) {\r\n                    return;\r\n                }\r\n        \r\n                const submitObserver = new MutationObserver(((mutations) => {\r\n                    mutations.forEach((mutation) => {\r\n                    if (mutation.type === 'attributes') {\r\n                        if (!mutation.target.disabled && form.checkValidity()) {\r\n                            walletButtonsContainer.style.display = 'block';\r\n                            updateProductDetailsData(form);\r\n                        } else {\r\n                            walletButtonsContainer.style.display = 'none';\r\n                            resetProductDetailsData();\r\n                        }\r\n                    }\r\n                    });\r\n                }));\r\n        \r\n                submitObserver.observe(submitButton, { attributes: true });\r\n        \r\n                form.addEventListener('click', () => {\r\n                    setTimeout(() => updateProductDetailsData(form), 0);\r\n                });\r\n        \r\n                form.addEventListener('change', () => {\r\n                    if (form.checkValidity() && !submitButton.disabled) {\r\n                        walletButtonsContainer.style.display = 'block';\r\n                        updateProductDetailsData(form);\r\n                    } else {\r\n                        walletButtonsContainer.style.display = 'none';\r\n                        resetProductDetailsData();\r\n                    }\r\n                });\r\n        \r\n                form.addEventListener('touchend', () => {\r\n                    setTimeout(() => updateProductDetailsData(form), 0);\r\n                });\r\n        \r\n                form.addEventListener('keyup', () => updateProductDetailsData(form));\r\n        \r\n                if (form.checkValidity() && !submitButton.disabled) {\r\n                    updateProductDetailsData(form);\r\n                } else {\r\n                    walletButtonsContainer.style.display = 'none';\r\n                    resetProductDetailsData();\r\n                }\r\n            }\r\n            init();\r\n        </script>\r\n    {{/if}}\r\n{{/or}}\r\n\r\n"}
