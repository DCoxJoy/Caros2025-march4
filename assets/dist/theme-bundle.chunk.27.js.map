{"version":3,"file":"theme-bundle.chunk.27.js","mappings":"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","sources":["webpack://bigcommerce-caros/./assets/js/theme/category.js"],"sourcesContent":["import $ from 'jquery';\nimport { hooks } from '@bigcommerce/stencil-utils';\nimport CatalogPage from './catalog';\nimport compareProducts from './global/compare-products';\nimport FacetedSearch from './common/faceted-search';\nimport 'fancybox';\n\nexport default class Category extends CatalogPage {\n    onReady() {\n        compareProducts(this.context.urls);\n\n        if ($('#facetedSearch').length > 0) {\n            this.initFacetedSearch();\n        } else {\n            this.onSortBySubmit = this.onSortBySubmit.bind(this);\n            hooks.on('sortBy-submitted', this.onSortBySubmit);\n        }\n\n        this.showmore_product();\n        this.showmore_htmltext();\n        this.categoryImage_fancybox();\n        this.position_category_filter();\n    }\n\n    initFacetedSearch() {\n        const $productListingContainer = $('#product-listing-container');\n        const $facetedSearchContainer = $('#faceted-search-container');\n        const productsPerPage = this.context.categoryProductsPerPage;\n        const requestOptions = {\n            config: {\n                category: {\n                    shop_by_price: true,\n                    products: {\n                        limit: productsPerPage,\n                    },\n                },\n            },\n            template: {\n                productListing: 'category/product-listing',\n                sidebar: 'category/sidebar',\n            },\n            showMore: 'category/show-more',\n        };\n\n        this.facetedSearch = new FacetedSearch(requestOptions, (content) => {\n            $productListingContainer.html(content.productListing);\n            $facetedSearchContainer.html(content.sidebar);\n\n            // $('html, body').animate({\n            //     scrollTop: 0,\n            // }, 100);\n        });\n    }\n\n    showmore_product() {\n        var check_link = $(\".pagination-item--current\").next();\n        if (check_link.length === 0) {\n            $('#button-showmore-category').css('display', 'none');\n        } else {\n            $(document).on('click', '#button-showmore-category', function(e){\n                e.preventDefault();\n                var nextPage = $(\".pagination-item--current\").next(),\n                    link = nextPage.find(\"a\").attr(\"href\");\n                $('#button-showmore-category').addClass('loadding');\n                $.ajax({\n                    type: 'get',\n                    url: link.replace(\"http://\", \"//\"),\n                    success: function(data) {\n                        if ($(data).find('#productLayout').length > 0) {\n                            $('#productLayout').append($(data).find('#productLayout').children());\n                            $('.pagination-list').html($(data).find(\".pagination-list\").html());\n                            $('#button-showmore-category').removeClass('loadding');\n                            if (Number($(data).find('.pagination-info .end').text()) <= Number($(data).find('.pagination-info .total').text())) {\n                                $('.pagination .pagination-info .end').html($(data).find('.pagination-info .end').text());\n                            } else {\n                                $('.pagination .pagination-info .end').html($(data).find('.pagination-info .total').text());\n                            }\n                            nextPage = $(\".pagination-item--current\").next();\n                            if (nextPage.length === 0) {\n                                $('#button-showmore-category').css('display', 'none');\n                            }\n                        }\n                    }\n                })\n            })\n        }\n    }\n\n    showmore_htmltext() {\n        var showChar = 600,\n            ellipsestext = \"...\",\n            moretext = \"Read more\",\n            lesstext = \"Read less\";\n        $('.custom-html-category .custom-html').each(function() {\n            var content = $(this).html();\n            if(content.length > showChar) {\n \n                var c = content.substr(0, showChar);\n                var h = content.substr(showChar, content.length - showChar);\n     \n                var html = c + '<span class=\"moreellipses\">' + ellipsestext+ '&nbsp;</span><span class=\"morecontent\"><span>' + h + '</span></span>';\n     \n                $(this).html(html);\n            }\n        });\n        $('#button-showmore-html').on('click', function(e) {\n            e.preventDefault();\n            if($(this).hasClass(\"less\")) {\n                $(this).removeClass(\"less\");\n                $(this).find('.text').html(moretext);\n                $(this).parent().prev().removeClass('showmore');\n            } else {\n                $(this).addClass(\"less\");\n                $(this).find('.text').html(lesstext);\n                $(this).parent().prev().addClass('showmore');\n            }\n        });\n    }\n\n    categoryImage_fancybox() {\n        $('.fancybox').fancybox({\n            // openEffect  : 'elastic'\n        });\n    }\n\n    position_category_filter() {\n        if ($(window).width() > 1024) {\n            if ($('.page-type-category').length) {\n                if ($('.banners[data-banner-location=\"top\"]').length) {\n                    var position = $('.banners[data-banner-location=\"top\"]').outerHeight()/2;\n                    console.log(position);\n                    $('.themevale_MultiCategory').css('top', position);\n                }\n            }\n        }\n        $(window).resize(function() {\n            if ($(window).width() > 1024) {\n                if ($('.page-type-category').length) {\n                    if ($('.banners[data-banner-location=\"top\"]').length) {\n                        var position = $('.banners[data-banner-location=\"top\"]').outerHeight()/2;\n                        console.log(position);\n                        $('.themevale_MultiCategory').css('top', position);\n                    }\n                }\n            } else {\n                $('.themevale_MultiCategory').css('top', 'auto');\n            }\n        });\n    }\n}\n"],"names":["Category","_CatalogPage","apply","arguments","_proto","prototype","onReady","compareProducts","this","context","urls","$","length","initFacetedSearch","onSortBySubmit","bind","hooks","on","showmore_product","showmore_htmltext","categoryImage_fancybox","position_category_filter","$productListingContainer","$facetedSearchContainer","requestOptions","config","category","shop_by_price","products","limit","categoryProductsPerPage","template","productListing","sidebar","showMore","facetedSearch","FacetedSearch","content","html","next","css","document","e","preventDefault","nextPage","link","find","attr","addClass","type","url","replace","success","data","append","children","removeClass","Number","text","showChar","each","substr","c","hasClass","parent","prev","fancybox","window","width","position","outerHeight","console","log","resize","CatalogPage"],"sourceRoot":""}